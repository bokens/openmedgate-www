<!-- Cookie Consent Banner (GDPR compliant) -->
<div x-data="cookieConsent()" x-show="showBanner" x-cloak
     class="fixed bottom-0 inset-x-0 z-50 p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 shadow-lg"
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="opacity-0 translate-y-4"
     x-transition:enter-end="opacity-100 translate-y-0"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-start="opacity-100 translate-y-0"
     x-transition:leave-end="opacity-0 translate-y-4">
  
  <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4">
    <div class="flex-1">
      <p class="text-sm text-gray-600 dark:text-gray-300">
        {{ i18n "cookie_message" }}
        <a href="/privacy" class="underline hover:text-primary-600 dark:hover:text-primary-400">
          {{ i18n "footer_privacy" }}
        </a>
      </p>
    </div>
    
    <div class="flex items-center gap-3">
      <button @click="declineCookies()" 
              class="px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">
        {{ i18n "cookie_decline" }}
      </button>
      <button @click="acceptCookies()"
              class="px-4 py-2 text-sm bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors">
        {{ i18n "cookie_accept" }}
      </button>
    </div>
  </div>
</div>

<script>
  function cookieConsent() {
    return {
      showBanner: false,
      
      init() {
        // Check if user has already made a choice
        const consent = localStorage.getItem('cookieConsent');
        if (consent === null) {
          this.showBanner = true;
        }
      },
      
      acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        this.showBanner = false;
        this.enableAnalytics();
      },
      
      declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        this.showBanner = false;
        this.disableAnalytics();
      },
      
      enableAnalytics() {
        // Enable HubSpot tracking, Google Analytics, etc.
        // Add your tracking scripts here
        console.log('Analytics enabled');
      },
      
      disableAnalytics() {
        // Disable tracking
        console.log('Analytics disabled');
      }
    }
  }
</script>
